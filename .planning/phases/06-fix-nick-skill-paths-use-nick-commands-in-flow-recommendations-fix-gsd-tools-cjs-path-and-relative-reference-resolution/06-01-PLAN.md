---
phase: 06-fix-nick-skill-paths-use-nick-commands-in-flow-recommendations-fix-gsd-tools-cjs-path-and-relative-reference-resolution
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/nick-plan-phase/SKILL.md
  - skills/nick-plan-phase/references/agents/nick-planner.md
  - skills/nick-plan-phase/references/agents/nick-plan-checker.md
  - skills/nick-plan-phase/references/agents/nick-phase-researcher.md
  - skills/nick-review/SKILL.md
  - skills/nick-verify-work/SKILL.md
  - skills/nick-execute-phase/SKILL.md
  - skills/nick-execute-phase/references/agents/nick-executor.md
  - skills/nick-execute-phase/references/agents/nick-verifier.md
autonomous: true

must_haves:
  truths:
    - "All gsd-tools invocations in nick skills use .cjs extension"
    - "Node commands referencing gsd-tools resolve to the actual file"
    - "Repo skill files and installed skill files are in sync"
  artifacts:
    - path: "skills/nick-plan-phase/SKILL.md"
      provides: "Plan-phase skill with corrected gsd-tools.cjs references"
      contains: "gsd-tools.cjs"
    - path: "skills/nick-plan-phase/references/agents/nick-planner.md"
      provides: "Planner agent with corrected gsd-tools.cjs references"
      contains: "gsd-tools.cjs"
    - path: "skills/nick-plan-phase/references/agents/nick-plan-checker.md"
      provides: "Plan checker agent with corrected gsd-tools.cjs references"
      contains: "gsd-tools.cjs"
    - path: "skills/nick-plan-phase/references/agents/nick-phase-researcher.md"
      provides: "Phase researcher agent with corrected gsd-tools.cjs references"
      contains: "gsd-tools.cjs"
    - path: "skills/nick-review/SKILL.md"
      provides: "Review skill with corrected gsd-tools.cjs references"
      contains: "gsd-tools.cjs"
    - path: "skills/nick-verify-work/SKILL.md"
      provides: "Verify-work skill with corrected gsd-tools.cjs references"
      contains: "gsd-tools.cjs"
    - path: "skills/nick-execute-phase/SKILL.md"
      provides: "Execute-phase skill with corrected gsd-tools.cjs references"
      contains: "gsd-tools.cjs"
    - path: "skills/nick-execute-phase/references/agents/nick-executor.md"
      provides: "Executor agent with corrected gsd-tools.cjs references"
      contains: "gsd-tools.cjs"
    - path: "skills/nick-execute-phase/references/agents/nick-verifier.md"
      provides: "Verifier agent with corrected gsd-tools.cjs references"
      contains: "gsd-tools.cjs"
  key_links:
    - from: "skills/nick-*/references/agents/*.md"
      to: "~/.claude/get-shit-done/bin/gsd-tools.cjs"
      via: "node bash invocation"
      pattern: "node.*gsd-tools\\.cjs"
---

<objective>
Fix all gsd-tools.js references to gsd-tools.cjs in nick-prefixed skill files.

Purpose: All 34 bash invocations of gsd-tools in nick skills reference `gsd-tools.js` which does not exist -- the actual file is `gsd-tools.cjs`. Every skill operation that calls gsd-tools (init, commit, verify, state management) fails with "Cannot find module" error. This is the highest-priority fix from Phase 6 research.

Output: 9 repo skill files updated, 9 installed skill files synced, zero remaining `.js` references to gsd-tools.

Note on other Phase 6 research items:
- **/gsd: command recommendations**: NOT changing. Investigation confirmed `/gsd:` commands exist at `~/.claude/commands/gsd/` as package-managed slash commands. They are the correct entry points that orchestrate skill execution. No `/nick:plan-phase` etc. equivalents exist.
- **@-reference resolution**: NOT changing. Research rated LOW confidence and recommended testing before changing. The `@~/.claude/...` format uses tilde-based absolute paths which work in shell context. If broken, it will surface during usage and can be addressed separately.
</objective>

<execution_context>
@/Users/nick/.claude/get-shit-done/workflows/execute-plan.md
@/Users/nick/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-fix-nick-skill-paths-use-nick-commands-in-flow-recommendations-fix-gsd-tools-cjs-path-and-relative-reference-resolution/06-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace gsd-tools.js with gsd-tools.cjs in all repo skill files</name>
  <files>
    skills/nick-plan-phase/SKILL.md
    skills/nick-plan-phase/references/agents/nick-planner.md
    skills/nick-plan-phase/references/agents/nick-plan-checker.md
    skills/nick-plan-phase/references/agents/nick-phase-researcher.md
    skills/nick-review/SKILL.md
    skills/nick-verify-work/SKILL.md
    skills/nick-execute-phase/SKILL.md
    skills/nick-execute-phase/references/agents/nick-executor.md
    skills/nick-execute-phase/references/agents/nick-verifier.md
  </files>
  <action>
    For each of the 9 files listed above, read the file and replace all occurrences of `gsd-tools.js` with `gsd-tools.cjs`. This is a literal string replacement -- no regex needed, no context-dependent changes.

    Expected occurrence counts per file (use to verify completeness):
    - nick-plan-phase/SKILL.md: 2
    - nick-plan-phase/references/agents/nick-planner.md: 6
    - nick-plan-phase/references/agents/nick-plan-checker.md: 5
    - nick-plan-phase/references/agents/nick-phase-researcher.md: 2
    - nick-review/SKILL.md: 2
    - nick-verify-work/SKILL.md: 1
    - nick-execute-phase/SKILL.md: 3
    - nick-execute-phase/references/agents/nick-executor.md: 8
    - nick-execute-phase/references/agents/nick-verifier.md: 5
    Total: 34 replacements

    Do NOT modify any files outside `skills/nick-*`. Planning docs (.planning/), agents/ root files, and GSD package files are out of scope.
  </action>
  <verify>
    Run: `grep -r "gsd-tools\.js" skills/nick-*` -- expect zero matches.
    Run: `grep -r "gsd-tools\.cjs" skills/nick-*` -- expect 34 matches across 9 files.
  </verify>
  <done>All 34 occurrences of gsd-tools.js replaced with gsd-tools.cjs in repo skill files. Zero gsd-tools.js references remain in skills/nick-*.</done>
</task>

<task type="auto">
  <name>Task 2: Sync repo skill files to installed location and verify</name>
  <files>
    ~/.claude/skills/nick-plan-phase/SKILL.md
    ~/.claude/skills/nick-plan-phase/references/agents/nick-planner.md
    ~/.claude/skills/nick-plan-phase/references/agents/nick-plan-checker.md
    ~/.claude/skills/nick-plan-phase/references/agents/nick-phase-researcher.md
    ~/.claude/skills/nick-review/SKILL.md
    ~/.claude/skills/nick-verify-work/SKILL.md
    ~/.claude/skills/nick-execute-phase/SKILL.md
    ~/.claude/skills/nick-execute-phase/references/agents/nick-executor.md
    ~/.claude/skills/nick-execute-phase/references/agents/nick-verifier.md
  </files>
  <action>
    Copy each of the 9 updated repo skill files to their corresponding installed location at ~/.claude/skills/nick-*:

    ```bash
    cp skills/nick-plan-phase/SKILL.md ~/.claude/skills/nick-plan-phase/SKILL.md
    cp skills/nick-plan-phase/references/agents/nick-planner.md ~/.claude/skills/nick-plan-phase/references/agents/nick-planner.md
    cp skills/nick-plan-phase/references/agents/nick-plan-checker.md ~/.claude/skills/nick-plan-phase/references/agents/nick-plan-checker.md
    cp skills/nick-plan-phase/references/agents/nick-phase-researcher.md ~/.claude/skills/nick-plan-phase/references/agents/nick-phase-researcher.md
    cp skills/nick-review/SKILL.md ~/.claude/skills/nick-review/SKILL.md
    cp skills/nick-verify-work/SKILL.md ~/.claude/skills/nick-verify-work/SKILL.md
    cp skills/nick-execute-phase/SKILL.md ~/.claude/skills/nick-execute-phase/SKILL.md
    cp skills/nick-execute-phase/references/agents/nick-executor.md ~/.claude/skills/nick-execute-phase/references/agents/nick-executor.md
    cp skills/nick-execute-phase/references/agents/nick-verifier.md ~/.claude/skills/nick-execute-phase/references/agents/nick-verifier.md
    ```

    Then verify both locations are clean and in sync:
    1. Zero `gsd-tools.js` references in installed skills
    2. Repo and installed files have identical content (diff check)
    3. Run a smoke test: `node ~/.claude/get-shit-done/bin/gsd-tools.cjs --help` to confirm the tool itself works
  </action>
  <verify>
    Run: `grep -r "gsd-tools\.js" ~/.claude/skills/nick-*` -- expect zero matches.
    Run: `diff -r skills/nick-plan-phase ~/.claude/skills/nick-plan-phase` -- expect no differences.
    Run: `diff -r skills/nick-execute-phase ~/.claude/skills/nick-execute-phase` -- expect no differences.
    Run: `diff skills/nick-review/SKILL.md ~/.claude/skills/nick-review/SKILL.md` -- expect no differences.
    Run: `diff skills/nick-verify-work/SKILL.md ~/.claude/skills/nick-verify-work/SKILL.md` -- expect no differences.
    Run: `node ~/.claude/get-shit-done/bin/gsd-tools.cjs --help` -- expect usage output (not "Cannot find module").
  </verify>
  <done>Installed skills at ~/.claude/skills/nick-* match repo skills exactly. Zero gsd-tools.js references remain in either location. gsd-tools.cjs is callable.</done>
</task>

</tasks>

<verification>
Phase-level checks:
1. `grep -r "gsd-tools\.js" skills/nick-*` returns zero results
2. `grep -r "gsd-tools\.js" ~/.claude/skills/nick-*` returns zero results
3. `grep -r "gsd-tools\.cjs" skills/nick-* | wc -l` returns 34
4. `node ~/.claude/get-shit-done/bin/gsd-tools.cjs --help` succeeds
5. `diff -rq skills/ ~/.claude/skills/ --exclude='.DS_Store'` shows no differences for nick-* subdirectories
</verification>

<success_criteria>
- All 34 gsd-tools.js references in repo skill files replaced with gsd-tools.cjs
- All 34 gsd-tools.js references in installed skill files replaced with gsd-tools.cjs
- Repo and installed skill files are identical
- gsd-tools.cjs is callable from the command line
- No functional regressions (file content unchanged except .js -> .cjs extension)
</success_criteria>

<output>
After completion, create `.planning/phases/06-fix-nick-skill-paths-use-nick-commands-in-flow-recommendations-fix-gsd-tools-cjs-path-and-relative-reference-resolution/06-01-SUMMARY.md`
</output>
